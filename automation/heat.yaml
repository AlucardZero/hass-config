- alias: 'Set heat when I get home'
  trigger:
    platform: state
    entity_id: group.all_devices
    from: 'not_home'
    to: 'home'
  condition:
    condition: and
    conditions:
      - condition: numeric_state
        entity_id: sensor.stelpro_stzw402_electronic_thermostat_temperature_11
        below: 60
      - condition: state
        entity_id: input_boolean.vacation
        state: 'off'
      - condition: state
        entity_id: input_boolean.automation_override
        state: 'off'
  action:
    service: script.heat_occupied

- alias: 'Set heat lower after bed'
  trigger:
    platform: state
    entity_id: group.bedroom_lights
    from: 'on'
    to: 'off'
  condition:
    condition: and
    conditions:
      - condition: time
        after: "22:00:00"
        before: "05:00:00"
      - condition: numeric_state
        entity_id: sensor.stelpro_stzw402_electronic_thermostat_temperature_11
        below: 60
      - condition: state
        entity_id: group.all_devices
        state: 'home'
      - condition: state
        entity_id: input_boolean.vacation
        state: 'off'
      - condition: state
        entity_id: input_boolean.automation_override
        state: 'off'
  action:
    service: script.heat_bed

- alias: 'Set heat higher in the morning'
  trigger:
    platform: time
    after: "08:00"
  condition:
    condition: and
    conditions:
      - condition: state
        entity_id: group.all_devices
        state: 'home'
      - condition: numeric_state
        entity_id: sensor.stelpro_stzw402_electronic_thermostat_temperature_11
        below: 60
      - condition: state
        entity_id: input_boolean.vacation
        state: 'off'
      - condition: state
        entity_id: input_boolean.automation_override
        state: 'off'
  action:
    service: script.heat_occupied
